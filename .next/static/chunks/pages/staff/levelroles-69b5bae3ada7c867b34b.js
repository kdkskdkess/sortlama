(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6900],{378:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return C}});var s=r(7757),a=r.n(s),n=r(2137),l=r(6610),o=r(5991),i=r(5255),p=r(3724),u=r(7608),c=r(8142),d=r(4730),f=(r(1664),r(9669)),g=r.n(f),m=(r(62),r(9249)),x=r(1163),h=r(2378),v=r.n(h),b=r(9008),y=c.default.createElement;function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;r=Reflect.construct(s,arguments,a)}else r=s.apply(this,arguments);return(0,p.Z)(this,r)}}var w=r(4985),k=function(e){(0,i.Z)(r,e);var t=N(r);function r(e){var s;return(0,l.Z)(this,r),(s=t.call(this,e)).props.quota=JSON.parse(s.props.quota),s.state={quota:s.props.quota,role:"",image:""},s}return(0,o.Z)(r,[{key:"render",value:function(){var e=this;(0,x.useRouter)();return y(c.default.Fragment,null,y(b.default,null,y("title",null,w.siteName," - ",v()("staff.sidebar.levelRoles",this.props.lang))),y(m.Ix,null),y("div",{className:"min-h-screen flex flex-row flex-col flex-auto flex-shrink-0 antialiased bg-gray-50 text-gray-800"},y(d.Z,{user:this.props.user,userIsStaff:this.props.userIsStaff,userIsAdmin:this.props.userIsAdmin,lang:this.props.lang}),y("div",{className:"bg-gray-900 h-screen w-screen px-16 md:px-64 p-6"},y("div",{className:"container mx-auto px-4 sm:px-8"},y("div",{className:"py-8"},y("div",null,y("h5",{className:"text-2xl font-semibold leading-tight text-gray-200"},v()("staff.levelroles.head",this.props.lang))),y("div",{className:"py-2"}),y("h2",{className:"text-sm font-semibold leading-tight text-gray-200"},v()("staff.levelroles.addLevelRole",this.props.lang)),y("div",{className:"my-2 flex sm:flex-row flex-col"},y("div",{className:"block relative"},y("select",{onChange:function(t){return e.setState({role:t.target.value})},className:"w-full py-2 px-2 bg-input rounded-md text-white border border-transparent focus:outline-none focus:border-transparent"},y("option",{value:0,selected:!0,disabled:!0},v()("staff.levelroles.selectRole",this.props.lang)),this.props.server.roles.sort((function(e,t){return t.position-e.position})).map((function(t){return y("option",{value:t.id,selected:e.state.role===t.id},t.name)})))),y("div",{className:"block relative ml-2"},y("input",{value:this.state.image,onChange:function(t){e.setState({image:t.target.value})},placeholder:v()("staff.levelroles.roleImage",this.props.lang),className:"w-full py-2 px-2 bg-input rounded-md text-white border border-transparent focus:outline-none focus:border-transparent"})),y("div",{className:"flex justify-center"},y("a",{className:"flex-no-grow flex-no-shrink relative text-lg py-0.5 px-4 ml-2 leading-normal text-white no-underline flex items-center transition duration-200 bg-green-500 hover:bg-green-600 cursor-pointer",onClick:function(){var t=(0,n.Z)(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.state.role.length&&0!==e.state.image.length){t.next=2;break}return t.abrupt("return",m.Am.error(v()("staff.levelroles.fillEverything",e.props.lang),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,draggable:!0,progress:void 0}));case 2:return t.next=4,g()(w.siteURL+"/api/levelroles",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:{settings:e.state,admin:"9wA7yggY0WI"}}).then((function(e){return e.data}));case 4:if(2!==t.sent.error){t.next=7;break}return t.abrupt("return",m.Am.error(v()("staff.levelroles.alreadyAdded",e.props.lang),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,draggable:!0,progress:void 0}));case 7:m.Am.success(v()("staff.levelroles.added",e.props.lang),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,draggable:!0,progress:void 0}),e.props.quota.push({id:e.state.role,roleLevel:e.state.image}),e.setState({image:""}),e.setState({role:""});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"Ekle"))),y("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto"},y("div",{className:"inline-block min-w-full shadow rounded-lg overflow-hidden bg-input"},y("table",{className:"min-w-full leading-normal"},y("thead",null,y("tr",null,y("th",{className:"px-5 py-3 bg-input text-left text-xs font-semibold text-gray-200 uppercase tracking-wider"},v()("staff.levelroles.role",this.props.lang)),y("th",{className:"px-5 py-3 bg-input text-left text-xs font-semibold text-gray-200 uppercase tracking-wider"},v()("staff.levelroles.roleBadge",this.props.lang)),y("th",{className:"px-5 py-3 bg-input text-left text-xs font-semibold text-gray-200 uppercase tracking-wider"},v()("staff.levelroles.acts",this.props.lang)))),y("tbody",null,this.props.quota.map((function(t,r){var s=e.props.server.roles.filter((function(e){return e.id===t.id}))[0];return s||(s={name:v()("staff.levelroles.deletedRole",e.props.lang),number:t.id}),y("tr",{id:"quota-".concat(r)},y("td",{className:"px-5 py-5 bg-input text-gray-100 text-sm"},y("p",{className:"text-gray-200 whitespace-no-wrap"},s.name)),y("td",{className:"px-5 py-5 bg-input text-gray-100 text-sm"},y("p",{className:"text-gray-200 whitespace-no-wrap"},t.roleLevel)),y("td",{className:"px-5 py-5 bg-input text-gray-100 text-sm"},y("div",{className:"flex"},y("div",{className:"badge cursor-pointer",onClick:function(){var l=(0,n.Z)(a().mark((function n(l){return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g()(w.siteURL+"/api/levelroles",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:{settings:{role:s.id?s.id:s.number,number:t.quota},delete:!0,admin:"9wA7yggY0WI"}}).then((function(e){return e.data}));case 2:return a.sent,document.getElementById("quota-".concat(r)).remove(),a.abrupt("return",m.Am.success(v()("staff.levelroles.deleted",e.props.lang),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,draggable:!0,progress:void 0}));case 5:case"end":return a.stop()}}),n)})));return function(e){return l.apply(this,arguments)}}()},y("span",{className:"px-2 ml-auto text-xs font-medium tracking-wide text-red-800 bg-blue-100 rounded-full"},v()("staff.levelroles.delete",e.props.lang))))))})))))))))))}}]),r}(c.default.Component),C=!0;t.default=k},5885:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/staff/levelroles",function(){return r(378)}])}},function(e){e.O(0,[5961,1192,9249,3355,4292,2888,9774,179],(function(){return t=5885,e(e.s=t);var t}));var t=e.O();_N_E=t}]);