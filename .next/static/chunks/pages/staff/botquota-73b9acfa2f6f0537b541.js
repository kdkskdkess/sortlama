(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9111],{9188:function(t,e,a){"use strict";a.r(e),a.d(e,{__N_SSP:function(){return k}});var r=a(7757),n=a.n(r),s=a(2137),o=a(6610),i=a(5991),l=a(5255),u=a(3724),p=a(7608),c=a(8142),d=a(4730),f=(a(1664),a(9669)),g=a.n(f),m=(a(62),a(9249)),b=a(1163),h=a(2378),x=a.n(h),v=a(9008),y=c.default.createElement;function N(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=(0,p.Z)(t);if(e){var n=(0,p.Z)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.Z)(this,a)}}var w=a(4985),q=function(t){(0,l.Z)(a,t);var e=N(a);function a(t){var r;return(0,o.Z)(this,a),(r=e.call(this,t)).props.quota=JSON.parse(r.props.quota),r.state={quota:r.props.quota,role:"",number:""},r}return(0,i.Z)(a,[{key:"render",value:function(){var t=this;(0,b.useRouter)();return y(c.default.Fragment,null,y(v.default,null,y("title",null,w.siteName," - ",x()("staff.sidebar.addBotQuota",this.props.lang))),y(m.Ix,null),y("div",{className:"min-h-screen flex flex-row flex-col flex-auto flex-shrink-0 antialiased bg-gray-50 text-gray-800"},y(d.Z,{user:this.props.user,userIsStaff:this.props.userIsStaff,userIsAdmin:this.props.userIsAdmin,lang:this.props.lang}),y("div",{className:"bg-gray-900 h-screen w-screen px-16 md:px-64 p-6"},y("div",{className:"container mx-auto px-4 sm:px-8"},y("div",{className:"py-8"},y("div",null,y("h5",{className:"text-2xl font-semibold leading-tight text-gray-200"},x()("staff.botquota.head",this.props.lang))),y("div",{className:"py-2"}),y("h2",{className:"text-sm font-semibold leading-tight text-gray-200"},x()("staff.botquota.addQuota",this.props.lang)),y("div",{className:"my-2 flex sm:flex-row flex-col"},y("div",{className:"block relative"},y("select",{onChange:function(e){return t.setState({role:e.target.value})},className:"w-full py-2 px-2 bg-input rounded-md text-white border border-transparent focus:outline-none focus:border-transparent"},y("option",{value:0,selected:!0,disabled:!0},x()("staff.botquota.selectRole",this.props.lang),"."),this.props.server.roles.sort((function(t,e){return e.position-t.position})).map((function(e){return y("option",{value:e.id,selected:t.state.role===e.id},e.name)})))),y("div",{className:"block relative ml-2"},y("input",{value:this.state.number,onChange:function(e){t.setState({number:e.target.value})},placeholder:x()("staff.botquota.botNumber",this.props.lang),type:"number",className:"w-full py-2 px-2 bg-input rounded-md text-white border border-transparent focus:outline-none focus:border-transparent"})),y("div",{className:"flex justify-center"},y("a",{className:"flex-no-grow flex-no-shrink relative text-lg py-0.5 px-4 ml-2 leading-normal text-white no-underline flex items-center transition duration-200 bg-green-500 hover:bg-green-600 cursor-pointer",onClick:function(){var e=(0,s.Z)(n().mark((function e(a){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.state.role.length&&0!==t.state.number.length){e.next=2;break}return e.abrupt("return",m.Am.error(x()("staff.botquota.fillEverything",t.props.lang),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,draggable:!0,progress:void 0}));case 2:return e.next=4,g()(w.siteURL+"/api/addbotquotarole",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:{settings:t.state,admin:"9wA7yggY0WI"}}).then((function(t){return t.data}));case 4:if(2!==e.sent.error){e.next=7;break}return e.abrupt("return",m.Am.error(x()("staff.botquota.alreadyAdded",t.props.lang),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,draggable:!0,progress:void 0}));case 7:m.Am.success(x()("staff.botquota.added",t.props.lang),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,draggable:!0,progress:void 0}),t.props.quota.push({id:t.state.role,quota:t.state.number}),t.setState({number:""}),t.setState({role:""});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x()("send",this.props.lang)))),y("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto"},y("div",{className:"inline-block min-w-full shadow rounded-lg overflow-hidden bg-input"},y("table",{className:"min-w-full leading-normal"},y("thead",null,y("tr",null,y("th",{className:"px-5 py-3 bg-input text-left text-xs font-semibold text-gray-200 uppercase tracking-wider"},x()("staff.botquota.role",this.props.lang)),y("th",{className:"px-5 py-3 bg-input text-left text-xs font-semibold text-gray-200 uppercase tracking-wider"},x()("staff.botquota.number",this.props.lang)),y("th",{className:"px-5 py-3 bg-input text-left text-xs font-semibold text-gray-200 uppercase tracking-wider"},x()("staff.botquota.acts",this.props.lang)))),y("tbody",null,this.props.quota.map((function(e,a){var r=t.props.server.roles.filter((function(t){return t.id===e.id}))[0];return r||(r={name:x()("staff.botquota.deletedRole",t.props.lang),number:e.id}),y("tr",{id:"quota-".concat(a)},y("td",{className:"px-5 py-5 bg-input text-gray-100 text-sm"},y("p",{className:"text-gray-200 whitespace-no-wrap"},r.name)),y("td",{className:"px-5 py-5 bg-input text-gray-100 text-sm"},y("p",{className:"text-gray-200 whitespace-no-wrap"},e.quota)),y("td",{className:"px-5 py-5 bg-input text-gray-100 text-sm"},y("div",{className:"flex"},y("div",{className:"badge cursor-pointer",onClick:function(){var o=(0,s.Z)(n().mark((function s(o){return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g()(w.siteURL+"/api/addbotquotarole",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:{settings:{role:r.id?r.id:r.number,number:e.quota},delete:!0,admin:"9wA7yggY0WI"}}).then((function(t){return t.data}));case 2:return n.sent,document.getElementById("quota-".concat(a)).remove(),n.abrupt("return",m.Am.success(x()("staff.botquota.deleted",t.props.lang),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,draggable:!0,progress:void 0}));case 5:case"end":return n.stop()}}),s)})));return function(t){return o.apply(this,arguments)}}()},y("span",{className:"px-2 ml-auto text-xs font-medium tracking-wide text-red-800 bg-blue-100 rounded-full"},x()("staff.botquota.delete",t.props.lang))))))})))))))))))}}]),a}(c.default.Component),k=!0;e.default=q},5315:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/staff/botquota",function(){return a(9188)}])}},function(t){t.O(0,[5961,1192,9249,3355,4292,2888,9774,179],(function(){return e=5315,t(t.s=e);var e}));var e=t.O();_N_E=e}]);